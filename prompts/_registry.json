{
  "version": "2.1.0",
  "prompts": [
    {
      "id": "analysis/bootstrap",
      "category": "analysis",
      "applicableTo": ["backend", "frontend", "fullstack", "library", "mobile", "monorepo", "cli", "unknown"],
      "requiredFeatures": [],
      "dependsOn": [],
      "produces": ["bootstrap", "repo-structure", "key-files"],
      "diagrams": [],
      "outputFile": "",
      "priority": 1000,
      "optional": false
    },
    {
      "id": "analysis/overview",
      "category": "analysis",
      "applicableTo": ["backend", "frontend", "fullstack", "library", "mobile", "monorepo", "cli", "unknown"],
      "requiredFeatures": [],
      "dependsOn": ["analysis/bootstrap"],
      "produces": ["overview", "project-type", "tech-stack"],
      "templateId": "overview",
      "diagrams": ["c4", "flowchart"],
      "outputFile": "00-foundation/overview.md",
      "priority": 100,
      "optional": false
    },
    {
      "id": "analysis/architecture",
      "category": "analysis",
      "applicableTo": ["backend", "frontend", "fullstack", "library", "monorepo"],
      "requiredFeatures": [],
      "dependsOn": ["analysis/overview"],
      "produces": ["architecture", "patterns", "layers"],
      "diagrams": ["c4", "flowchart"],
      "outputFile": "00-foundation/architecture.md",
      "priority": 90,
      "optional": false
    },
    {
      "id": "analysis/entities",
      "category": "analysis",
      "applicableTo": ["backend", "fullstack", "library"],
      "requiredFeatures": [],
      "dependsOn": ["analysis/overview"],
      "produces": ["entities", "domain-model"],
      "templateId": "entity/model",
      "diagrams": ["erd", "classDiagram"],
      "outputFile": "01-domain/entities.md",
      "priority": 85,
      "optional": false
    },
    {
      "id": "analysis/modules",
      "category": "analysis",
      "applicableTo": ["backend", "frontend", "fullstack", "library", "monorepo"],
      "requiredFeatures": [],
      "dependsOn": ["analysis/architecture"],
      "produces": ["modules", "dependencies", "backend-modules", "frontend-modules"],
      "diagrams": ["flowchart"],
      "outputFile": "02-modules/index.md",
      "priority": 80,
      "optional": false
    },
    {
      "id": "api/detect-endpoints",
      "category": "analysis",
      "applicableTo": ["backend", "fullstack"],
      "requiredFeatures": ["has_rest_api"],
      "dependsOn": ["analysis/entities"],
      "produces": ["api-endpoints", "rest-api", "api-rest"],
      "templateId": "api/endpoint",
      "diagrams": ["sequence"],
      "outputFile": "03-api/endpoints.md",
      "priority": 75,
      "optional": true
    },
    {
      "id": "api/detect-graphql",
      "category": "analysis",
      "applicableTo": ["backend", "fullstack"],
      "requiredFeatures": ["has_graphql"],
      "dependsOn": ["analysis/entities"],
      "produces": ["graphql-schema"],
      "diagrams": ["classDiagram"],
      "outputFile": "03-api/graphql.md",
      "priority": 74,
      "optional": true
    },
    {
      "id": "data/detect-schema",
      "category": "analysis",
      "applicableTo": ["backend", "fullstack"],
      "requiredFeatures": ["has_sql_db", "has_nosql_db"],
      "dependsOn": ["analysis/entities"],
      "produces": ["database-schema"],
      "diagrams": ["erd"],
      "outputFile": "04-data/database.md",
      "priority": 70,
      "optional": true
    },
    {
      "id": "auth/detect-auth",
      "category": "analysis",
      "applicableTo": ["backend", "fullstack"],
      "requiredFeatures": ["has_auth"],
      "dependsOn": ["api/detect-endpoints"],
      "produces": ["authentication"],
      "templateId": "auth/flow",
      "diagrams": ["sequence", "stateDiagram"],
      "outputFile": "05-auth/authentication.md",
      "priority": 65,
      "optional": true
    },
    {
      "id": "auth/detect-authz",
      "category": "analysis",
      "applicableTo": ["backend", "fullstack"],
      "requiredFeatures": ["has_rbac"],
      "dependsOn": ["auth/detect-auth"],
      "produces": ["authorization"],
      "diagrams": ["flowchart"],
      "outputFile": "05-auth/authorization.md",
      "priority": 64,
      "optional": true
    },
    {
      "id": "ui/detect-components",
      "category": "analysis",
      "applicableTo": ["frontend", "fullstack", "mobile"],
      "requiredFeatures": ["has_react", "has_vue", "has_angular"],
      "dependsOn": ["analysis/modules"],
      "produces": ["ui-components"],
      "templateId": "ui/component",
      "diagrams": ["classDiagram", "flowchart"],
      "outputFile": "02-modules/frontend/components.md",
      "priority": 60,
      "optional": true
    },
    {
      "id": "ui/analyze-state",
      "category": "analysis",
      "applicableTo": ["frontend", "fullstack"],
      "requiredFeatures": ["has_state_mgmt"],
      "dependsOn": ["ui/detect-components"],
      "produces": ["state-management"],
      "diagrams": ["stateDiagram", "flowchart"],
      "outputFile": "02-modules/frontend/state.md",
      "priority": 55,
      "optional": true
    },
    {
      "id": "integration/detect-services",
      "category": "analysis",
      "applicableTo": ["backend", "fullstack"],
      "requiredFeatures": [],
      "dependsOn": ["api/detect-endpoints"],
      "produces": ["external-services"],
      "diagrams": ["sequence"],
      "outputFile": "06-integration/services.md",
      "priority": 50,
      "optional": true
    },
    {
      "id": "integration/dependencies",
      "category": "analysis",
      "applicableTo": ["backend", "frontend", "fullstack", "library", "monorepo"],
      "requiredFeatures": [],
      "dependsOn": ["analysis/bootstrap"],
      "produces": ["package-dependencies"],
      "diagrams": ["pie"],
      "outputFile": "06-integration/dependencies.md",
      "priority": 45,
      "optional": false
    },
    {
      "id": "ops/deployment",
      "category": "analysis",
      "applicableTo": ["backend", "fullstack"],
      "requiredFeatures": ["has_docker", "has_k8s", "has_serverless"],
      "dependsOn": ["analysis/architecture"],
      "produces": ["deployment"],
      "diagrams": ["flowchart", "c4"],
      "outputFile": "07-ops/deployment.md",
      "priority": 40,
      "optional": true
    },
    {
      "id": "ops/cicd",
      "category": "analysis",
      "applicableTo": ["backend", "frontend", "fullstack", "library"],
      "requiredFeatures": ["has_cicd"],
      "dependsOn": ["ops/deployment"],
      "produces": ["ci-cd"],
      "diagrams": ["flowchart", "gantt"],
      "outputFile": "07-ops/ci-cd.md",
      "priority": 35,
      "optional": true
    },
    {
      "id": "analysis/security-audit",
      "category": "audit",
      "applicableTo": ["backend", "fullstack"],
      "requiredFeatures": [],
      "dependsOn": ["auth/detect-auth", "api/detect-endpoints", "data/detect-schema"],
      "produces": ["security-audit"],
      "diagrams": ["flowchart"],
      "outputFile": "05-auth/security.md",
      "priority": 30,
      "optional": true
    },
    {
      "id": "analysis/summary",
      "category": "document",
      "applicableTo": ["backend", "frontend", "fullstack", "library", "mobile", "monorepo", "cli", "unknown"],
      "requiredFeatures": [],
      "dependsOn": ["*"],
      "produces": ["summary", "index"],
      "diagrams": ["c4"],
      "outputFile": "index.md",
      "priority": 10,
      "optional": false
    },
    {
      "id": "feature/spec-from-task",
      "category": "document",
      "applicableTo": ["backend", "frontend", "fullstack", "library", "mobile", "monorepo", "cli", "unknown"],
      "requiredFeatures": [],
      "dependsOn": ["analysis/summary"],
      "produces": ["feature-spec"],
      "templateId": "feature/spec",
      "diagrams": ["flowchart"],
      "outputFile": "features/new-feature.md",
      "priority": 5,
      "optional": true
    }
  ]
}
